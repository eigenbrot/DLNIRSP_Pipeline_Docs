
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>main &#8212; DLNIRSP_Pipeline v0.6.1</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700" type="text/css" />
    <link rel="stylesheet" href="../_static/dkist.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/favico.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="make_binary" href="DLNIRSP_Pipeline.SolarFlatCalibration.make_binary.html" />
    <link rel="prev" title="generate_solar_gain_calibration" href="DLNIRSP_Pipeline.SolarFlatCalibration.generate_solar_gain_calibration.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="col-md-3 navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://nso.edu"><img src="../_static/img/NSOlogo.gif">
        </a>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav hidden">
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">DL-NIRSP Pipeline Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config_file.html">Configuration File Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../walkthrough.html">Data Reduction Walkthrough</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../API.html">Reference/API</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">main</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="DLNIRSP_Pipeline.SolarFlatCalibration.generate_solar_gain_calibration.html" title="Previous Chapter: generate_solar_gain_calibration"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; generate_sola...</span>
    </a>
  </li>
  <li>
    <a href="DLNIRSP_Pipeline.SolarFlatCalibration.make_binary.html" title="Next Chapter: make_binary"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">make_binary &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>
          
            <ul class="nav navbar-nav navbar-left">
              <li><a href="http://dkist.nso.edu/">DKIST</a></li>
              <li><a href="http://docs.cadair.com/devdocs">DC Developer Guide</a></li>
              <li><a href="http://docs.cadair.com/datarate">DKIST Data Rate</a></li>
              <li><a href="http://docs.cadair.com/datamodel">DKIST Data Model</a></li>
            </ul>
          
          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">

    <div class="col-md-3"><div id="side-logo" >
            <a href="http://dkist.nso.edu">
                <img src="../_static/img/DKISTLogo-Medium.jpg">
            </a>
        </div><div id="sidebar" class="bs-sidenav" role="complementary">
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">DL-NIRSP Pipeline Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config_file.html">Configuration File Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../walkthrough.html">Data Reduction Walkthrough</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../API.html">Reference/API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-DLNIRSP_Pipeline.DLNIRSPPipeline">DLNIRSP_Pipeline.DLNIRSPPipeline Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-DLNIRSP_Pipeline.ScienceCalibration">DLNIRSP_Pipeline.ScienceCalibration Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-DLNIRSP_Pipeline.DarkCalibration">DLNIRSP_Pipeline.DarkCalibration Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-DLNIRSP_Pipeline.InstrumentPolarizationCalibration">DLNIRSP_Pipeline.InstrumentPolarizationCalibration Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-DLNIRSP_Pipeline.LampFlatCalibration">DLNIRSP_Pipeline.LampFlatCalibration Module</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../API.html#module-DLNIRSP_Pipeline.SolarFlatCalibration">DLNIRSP_Pipeline.SolarFlatCalibration Module</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../API.html#id5">Functions</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.align_masks.html">align_masks</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.compute_average_spectrum.html">compute_average_spectrum</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.correct_rotation.html">correct_rotation</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.do_hough.html">do_hough</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.extract.html">extract</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.extract_perfect_slit.html">extract_perfect_slit</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.extract_slitbeams.html">extract_slitbeams</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.find_beam_offset.html">find_beam_offset</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.find_borders.html">find_borders</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.find_camera_rotation.html">find_camera_rotation</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.find_px_angles.html">find_px_angles</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.find_spec_geometry.html">find_spec_geometry</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.generate_average_spectra.html">generate_average_spectra</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.generate_avg_slitbeam.html">generate_avg_slitbeam</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.generate_geometric_calibration.html">generate_geometric_calibration</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.generate_solar_gain_calibration.html">generate_solar_gain_calibration</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">main</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.make_binary.html">make_binary</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.quick_script.html">quick_script</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.remove_avg_spectra.html">remove_avg_spectra</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.remove_spec_geometry.html">remove_spec_geometry</a></li>
<li class="toctree-l4"><a class="reference internal" href="DLNIRSP_Pipeline.SolarFlatCalibration.validate_solar_task_data.html">validate_solar_task_data</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-DLNIRSP_Pipeline.IFUCalibration">DLNIRSP_Pipeline.IFUCalibration Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-DLNIRSP_Pipeline.generic">DLNIRSP_Pipeline.generic Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-DLNIRSP_Pipeline.Data">DLNIRSP_Pipeline.Data Module</a></li>
</ul>
</li>
</ul>

            
        </div>
    </div>

    <div class="body col-md-9 content" role="main">
      
  <div class="section" id="main">
<h1>main<a class="headerlink" href="#main" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="DLNIRSP_Pipeline.SolarFlatCalibration.main">
<code class="sig-prename descclassname">DLNIRSP_Pipeline.SolarFlatCalibration.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">solar_dir</em>, <em class="sig-param">outpre</em>, <em class="sig-param">geo_out</em>, <em class="sig-param">dark_cal=None</em>, <em class="sig-param">dark_cal_sig=None</em>, <em class="sig-param">instrument_pol_cal=None</em>, <em class="sig-param">allow_no_pol=False</em>, <em class="sig-param">lamp_cal=None</em>, <em class="sig-param">lamp_cal_sig=None</em>, <em class="sig-param">mask_value=nan</em>, <em class="sig-param">debug=False</em>, <em class="sig-param">telescope_db=None</em>, <em class="sig-param">remove_TM=True</em>, <em class="sig-param">include_M12=True</em>, <em class="sig-param">remove_parallactic=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/DLNIRSP_Pipeline/SolarFlatCalibration.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#DLNIRSP_Pipeline.SolarFlatCalibration.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a set of raw Solar gain images through the SolarFlatCalibration pipeline.</p>
<p>If the associated Calibration objects are provided then the raw data will be dark corrected and have the lamp
gain removed prior to further analysis. These steps are not strictly required but are highly recommended.</p>
<p>The result of this pipeline is a Solar Gain Calibration object suitable for flattening the response of the DLNIRSP
detector. As a side effect a Geometric Calibration object is produced. This object is used to remove the
distorting effects of the DL optics from the data.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>solar_dir</strong><span class="classifier">str</span></dt><dd><p>Location of directory holding full set of Solar flat images. There can be other images in this directory too.</p>
</dd>
<dt><strong>outpre</strong><span class="classifier">str</span></dt><dd><p>Prefix of the final SolarFlat object file.</p>
</dd>
<dt><strong>geo_out</strong><span class="classifier">str</span></dt><dd><p>Filename to use when saving the Geometric Calibration object</p>
</dd>
<dt><strong>dark_cal</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Data.FitsData</span></code></span></dt><dd><p>Dark Calibration object</p>
</dd>
<dt><strong>dark_cal_sig</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Data.FitsData</span></code></span></dt><dd><p>Uncertainty associated with <code class="docutils literal notranslate"><span class="pre">dark_cal</span></code></p>
</dd>
<dt><strong>instrument_pol_cal</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Data.DemodulationData</span></code></span></dt><dd><p>Object containing demodulation matrices</p>
</dd>
<dt><strong>allow_no_pol</strong><span class="classifier">bool</span></dt><dd><p>If True then let the script continue without <code class="docutils literal notranslate"><span class="pre">instrument_pol_cal</span></code></p>
</dd>
<dt><strong>lamp_cal</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Data.FitsData</span></code></span></dt><dd><p>Lamp Flat Calibration object</p>
</dd>
<dt><strong>lamp_cal_sig</strong><span class="classifier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Data.FitsData</span></code></span></dt><dd><p>Uncertainty associated with <code class="docutils literal notranslate"><span class="pre">lamp_cal</span></code></p>
</dd>
<dt><strong>mask_value</strong><span class="classifier">float</span></dt><dd><p>Constant with which to fill the non-data regions (default is NaN)</p>
</dd>
<dt><strong>debug</strong><span class="classifier">bool</span></dt><dd><p>If True then a bunch of images are saved and interactive plots made. Probably stay away from this one.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">Data.FitsData</span></code></dt><dd><p>The Solar Flat Calibration object</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">Data.FitsData</span></code></dt><dd><p>Sigma associated with the Solar Flat Calibration object</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">Data.FitsData</span></code></dt><dd><p>The Geometric Calibration object</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <div class="left-footer">
         &copy; 2019, Arthur Eigenbrot
       <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a>
    </div>
   
    <div class="right-footer">
      Last updated on 27 Sep 2019.
    </div>
    <div class="centre-footer">
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.0
    </div>
  </div>
</footer>
  </body>
</html>